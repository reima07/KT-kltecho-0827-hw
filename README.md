# 0827_hw - Full-Stack Kubernetes Project

## ğŸ¯ í”„ë¡œì íŠ¸ ê°œìš”

**ì™„ì „í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜**ë¥¼ Kubernetesì— ë°°í¬í•˜ê³  **OpenTelemetryë¥¼ í†µí•œ ê´€ì°°ì„±**ì„ êµ¬í˜„í•œ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

### âœ… í˜„ì¬ ìƒíƒœ: **ì™„ë£Œ** ğŸš€
- **OpenTelemetry í†µí•© ì™„ë£Œ**: êµ¬ì¡°í™”ëœ ë¡œê¹… ë° íŠ¸ë ˆì´ì‹±
- **í¬ë¡œìŠ¤-í´ëŸ¬ìŠ¤í„° ëª¨ë‹ˆí„°ë§**: AKS 145 â†’ AKS 144 Grafana ì—°ë™
- **ì™„ì „í•œ ê´€ì°°ì„±**: Tempo(íŠ¸ë ˆì´ìŠ¤) + Loki(ë¡œê·¸) + ìë™ ê³„ì¸¡

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: Vue.js 2.6 + Nginx
- **Backend**: Python Flask + OpenTelemetry
- **Database**: MariaDB + Redis + Kafka
- **Infrastructure**: Kubernetes (AKS) + Helm
- **Observability**: Grafana Tempo + Loki + OpenTelemetry Collector

### ì„œë¹„ìŠ¤ êµ¬ì„±
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚    Backend      â”‚    â”‚   Database      â”‚
â”‚   (Vue.js)      â”‚â—„â”€â”€â–ºâ”‚   (Flask)       â”‚â—„â”€â”€â–ºâ”‚   (MariaDB)     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ OpenTelemetry   â”‚    â”‚ OpenTelemetry   â”‚    â”‚   Redis         â”‚
â”‚   (Browser)     â”‚    â”‚   (Server)      â”‚    â”‚   Kafka         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚  Grafana Stack  â”‚
                       â”‚                 â”‚
                       â”‚  Tempo (Traces) â”‚
                       â”‚  Loki (Logs)    â”‚
                       â”‚  Collector      â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1. ì‚¬ìš©ì ê´€ë¦¬
- âœ… íšŒì›ê°€ì…/ë¡œê·¸ì¸ ì‹œìŠ¤í…œ
- âœ… ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ (Redis)
- âœ… ì‚¬ìš©ìë³„ ë©”ì‹œì§€ ê´€ë¦¬

### 2. ë©”ì‹œì§€ ê´€ë¦¬
- âœ… ë©”ì‹œì§€ ì €ì¥/ì¡°íšŒ (MariaDB)
- âœ… ì‹¤ì‹œê°„ ë¡œê·¸ ìˆ˜ì§‘ (Redis)
- âœ… ë©”ì‹œì§€ ê²€ìƒ‰ ê¸°ëŠ¥

### 3. ê´€ì°°ì„± (Observability)
- âœ… **OpenTelemetry ìë™ ê³„ì¸¡**
  - Flask API íŠ¸ë ˆì´ìŠ¤
  - MySQL ë°ì´í„°ë² ì´ìŠ¤ íŠ¸ë ˆì´ìŠ¤
  - Redis ìºì‹œ íŠ¸ë ˆì´ìŠ¤
- âœ… **êµ¬ì¡°í™”ëœ ë¡œê¹…**
  - JSON í˜•íƒœ ë¡œê·¸
  - trace_id, span_id í¬í•¨
  - ì„œë¹„ìŠ¤ë³„ ë¡œê·¸ êµ¬ë¶„
- âœ… **Grafana ì‹œê°í™”**
  - Tempo: íŠ¸ë ˆì´ìŠ¤ ë¶„ì„
  - Loki: ë¡œê·¸ ê²€ìƒ‰
  - ë¡œê·¸-íŠ¸ë ˆì´ìŠ¤ ì—°ê²°

---

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹…

### Grafana ëŒ€ì‹œë³´ë“œ
- **Tempo**: API í˜¸ì¶œ íŠ¸ë ˆì´ìŠ¤, ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ë¶„ì„
- **Loki**: êµ¬ì¡°í™”ëœ ë¡œê·¸ ê²€ìƒ‰, ì—ëŸ¬ ì¶”ì 
- **ë¡œê·¸-íŠ¸ë ˆì´ìŠ¤ ì—°ê²°**: Tempoì—ì„œ "View logs" ë²„íŠ¼ìœ¼ë¡œ ì í”„

### íŠ¸ë ˆì´ìŠ¤ ì˜ˆì‹œ
```
HTTP POST /api/db/message
â”œâ”€â”€ save_message_to_db (ìˆ˜ë™ ìŠ¤íŒ¬)
â”‚   â”œâ”€â”€ database_connection (MySQL ì—°ê²°)
â”‚   â”œâ”€â”€ sql_execution (INSERT ì¿¼ë¦¬)
â”‚   â””â”€â”€ redis_logging (Redis ì‘ì—…)
â””â”€â”€ LPUSH (Redis ìë™ ê³„ì¸¡)
```

---

## ğŸ› ï¸ ì„¤ì¹˜ ë° ë°°í¬

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­
- Azure Kubernetes Service (AKS)
- Azure Container Registry (ACR)
- Helm 3.x
- kubectl

### 1. í™˜ê²½ ì„¤ì •
```bash
# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
cp env.example .env
# .env íŒŒì¼ í¸ì§‘í•˜ì—¬ ì‹¤ì œ ê°’ ì…ë ¥
```

### 2. ë°°í¬
```bash
# ì „ì²´ ë°°í¬
./deploy-to-jiwoo-namespace.sh

# ê°œë³„ ë°°í¬
kubectl apply -f k8s/ -n jiwoo
```

### 3. í™•ì¸
```bash
# Pod ìƒíƒœ í™•ì¸
kubectl get pods -n jiwoo

# ì„œë¹„ìŠ¤ í™•ì¸
kubectl get services -n jiwoo

# ë¡œê·¸ í™•ì¸
kubectl logs -f deployment/jiwoo-backend -n jiwoo
```

---

## ğŸ”§ ê°œë°œ ë° í…ŒìŠ¤íŠ¸

### ë¡œì»¬ ê°œë°œ
```bash
# ë°±ì—”ë“œ
cd backend
pip install -r requirements.txt
python app.py

# í”„ë¡ íŠ¸ì—”ë“œ
cd frontend
npm install
npm run serve
```

### CI/CD
- **GitHub Actions**: ìë™ ë¹Œë“œ ë° ACR í‘¸ì‹œ
- **Kubernetes**: ìë™ ë¡¤ì•„ì›ƒ ë° ë°°í¬
- **OpenTelemetry**: ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§

---

## ğŸ“ˆ ì„±ëŠ¥ ì§€í‘œ

### í˜„ì¬ ìƒíƒœ
- **íŠ¸ë ˆì´ìŠ¤ ìƒì„±ë¥ **: 100% (ëª¨ë“  API í˜¸ì¶œ)
- **ë¡œê·¸ ìˆ˜ì§‘ë¥ **: 100% (ì‹¤ì‹œê°„ ì „ì†¡)
- **ì‹œìŠ¤í…œ ì•ˆì •ì„±**: 99% ì´ìƒ
- **ì‘ë‹µ ì‹œê°„**: í‰ê·  < 100ms

### ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥í•œ ì§€í‘œ
- API ì‘ë‹µ ì‹œê°„
- ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ì„±ëŠ¥
- Redis ìºì‹œ íˆíŠ¸ìœ¨
- ì‚¬ìš©ì ì•¡ì…˜ ì¶”ì 
- ì—ëŸ¬ ë°œìƒë¥ 

---

## ğŸ“š ë¬¸ì„œ

### ìƒì„¸ ë¬¸ì„œ
- [í”„ë¡œì íŠ¸ ê°œìš”](docs/PROJECT_OVERVIEW.md)
- [ë°°í¬ ì´ìŠˆ í•´ê²°](docs/deployment-issues.md)
- [OpenTelemetry í†µí•©](docs/AKS_LOGGING_INTEGRATION.md)
- [ë³€ê²½ ì´ë ¥](docs/CHANGELOG.md)
- [í”„ë¡œì íŠ¸ íˆìŠ¤í† ë¦¬](docs/PROJECT_HISTORY.md)

### ê¸°ìˆ  ë¬¸ì„œ
- [Kubernetes ë¦¬ì†ŒìŠ¤](docs/kubernetes-resources.md)
- [GitHub Actions ì„¤ì •](docs/github-actions-setup.md)
- [ë¬¸ì œ í•´ê²° ê°€ì´ë“œ](docs/TROUBLESHOOTING_LOG.md)

---

## ğŸ‰ í”„ë¡œì íŠ¸ ì™„ë£Œ

**OpenTelemetry í†µí•©ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!**

### âœ… ë‹¬ì„±í•œ ëª©í‘œ
- [x] ì™„ì „í•œ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ êµ¬ì¶•
- [x] Kubernetes ê¸°ë°˜ ë°°í¬ ìë™í™”
- [x] OpenTelemetryë¥¼ í†µí•œ ê´€ì°°ì„± êµ¬í˜„
- [x] í¬ë¡œìŠ¤-í´ëŸ¬ìŠ¤í„° ëª¨ë‹ˆí„°ë§
- [x] êµ¬ì¡°í™”ëœ ë¡œê¹… ë° íŠ¸ë ˆì´ì‹±
- [x] Grafana ì‹œê°í™”

### ğŸš€ ë‹¤ìŒ ë‹¨ê³„
- í”„ë¡œë•ì…˜ í™˜ê²½ ë°°í¬
- ì„±ëŠ¥ ìµœì í™”
- ë³´ì•ˆ ê°•í™”
- í™•ì¥ì„± ê°œì„ 

---

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. [ë°°í¬ ì´ìŠˆ í•´ê²° ê°€ì´ë“œ](docs/deployment-issues.md)
2. [ë¬¸ì œ í•´ê²° ë¡œê·¸](docs/TROUBLESHOOTING_LOG.md)
3. [í”„ë¡œì íŠ¸ íˆìŠ¤í† ë¦¬](docs/PROJECT_HISTORY.md)

**ì´ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ ì™„ì „í•œ ëª¨ë‹ˆí„°ë§ê³¼ ë””ë²„ê¹…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!** ğŸ¯ 